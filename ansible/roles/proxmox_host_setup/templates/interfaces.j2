# Proxmox NAS Network Configuration
# Generated by Ansible

auto lo
iface lo inet loopback

# Management interface
auto {{ network.interface | default('enp1s0') }}
iface {{ network.interface | default('enp1s0') }} inet static
    address {{ network.management_ip | default('192.168.1.100/24') }}
    gateway {{ network.gateway | default('192.168.1.1') }}
    dns-nameservers {{ network.dns | default('8.8.8.8 1.1.1.1') }}

# NAS VLAN interface
auto {{ network.interface | default('enp1s0') }}.{{ network.vlan_id }}
iface {{ network.interface | default('enp1s0') }}.{{ network.vlan_id }} inet static
    address {{ network.ip_range | ipaddr('1') | ipaddr('address') }}/24
    vlan-raw-device {{ network.interface | default('enp1s0') }}

# Proxmox bridge for VMs
auto vmbr0
iface vmbr0 inet manual
    bridge-ports {{ network.interface | default('enp1s0') }}.{{ network.vlan_id }}
    bridge-stp off
    bridge-fd 0
    bridge-vlan-aware yes
    bridge-vids 2-4094
